(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{294:function(t,e,n){},297:function(t,e,n){"use strict";n.r(e);var a,r=n(0),c=n.n(r),i=n(17),o=n.n(i),s=n(12),l=n(32),u=n(147),m=n(148),d=n(373),f=n(374),v=(n(289),n(367)),h=n(369),b=n(370),j=n(368),p=n(30),g=n(378),O=n(149),x=n(364),y=n(366),w=n(380),k=n(10),z=Object(k.a)((function(t){return{root:{background:t.palette.secondary.main},label:{color:t.palette.primary.main}}}))(w.a),M=n(7),S=Object(g.a)(a||(a=Object(p.a)(["\n  query ($latLong: WeatherQuery!) {\n    getWeatherForLocation(latLong: $latLong) {\n      description\n      locationName\n      temperatureinCelsius\n    }\n  }\n"]))),E=function(){var t=Object(x.a)(),e={latitude:t.latitude||29.7604,longitude:t.longitude||-95.3698},n=Object(O.a)(S,{variables:{latLong:e}}),a=n.loading,r=n.error,c=n.data;if(a)return Object(M.jsx)(y.a,{});if(r)return Object(M.jsx)(v.a,{color:"error",children:r});if(!c)return Object(M.jsx)(z,{label:"Weather not found"});var i,o=c.getWeatherForLocation,s=o.locationName,l=o.description,u=o.temperatureinCelsius;return Object(M.jsx)(z,{label:"Weather in ".concat(s,": ").concat(l," and ").concat(Math.round((i=u,9*i/5+32)),"\xb0")})},A=function(){return Object(M.jsx)(E,{})},N=Object(j.a)({grow:{flexGrow:1}}),L=function(){var t=N();return Object(M.jsx)(h.a,{position:"static",children:Object(M.jsxs)(b.a,{children:[Object(M.jsxs)(v.a,{variant:"h6",color:"inherit",className:t.grow,children:["Jenny's"," EOG React Visualization Assessment"]}),Object(M.jsx)(A,{})]})})},R=Object(j.a)({wrapper:{height:"100vh"}}),C=function(t){var e=t.children,n=R();return Object(M.jsx)("div",{className:n.wrapper,children:e})},D=n(377),I=n(379),T=n(372),W=n(371);var q,F=n(21),G=n(26),$=0;var J,P=Object(g.a)(q||(q=Object(p.a)(["\n  query ($input: [MeasurementQuery]) {\n    getMultipleMeasurements(input: $input) {\n      metric\n      measurements {\n        at\n        value\n        metric\n        unit\n      }\n    }\n  }\n"]))),Z=function(){var t=Object(r.useContext)(X),e=Date.now()-18e5,n=Object(r.useRef)(t.state.metrics.map((function(t){return{metricName:t,after:e}}))),a=Object(r.useRef)(),i=Object(r.useRef)(),o=function(t){var e=Object(r.useState)({width:0,height:0}),n=Object(s.a)(e,2),a=n[0],c=n[1],i=Object(r.useRef)(new ResizeObserver((function(t){var e=t[0].borderBoxSize[0],n=e.inlineSize,a=e.blockSize;c({width:n,height:a})})));return Object(r.useEffect)((function(){return t.current&&i.current.observe(t.current),function(){t.current&&i.current.unobserve(t.current)}}),[t,i]),a}(i),u=Object(W.a)(P,{variables:{input:n.current},pollInterval:1e3,fetchPolicy:"no-cache"}),m=Object(s.a)(u,2),d=m[0],f=m[1],v=(f.loading,f.data);f.error;Object(r.useEffect)((function(){n.current=t.state.metrics.map((function(t){return{metricName:t,after:e}})),d()}),[t.state.metrics]);var h={margin:{top:30,right:50,bottom:30,left:50},width:o.width-100,height:o.height-60};return n.current.forEach((function(t){return t.after=e})),c.a.useEffect((function(){var t,e,n=null===v||void 0===v||null===(t=v.getMultipleMeasurements)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.measurements,r=null===v||void 0===v?void 0:v.getMultipleMeasurements;n&&function(t,e,n){var a=G.k,r=n.map((function(t,e){return Object(l.a)(Object(l.a)({},t),{},{color:a[e]})})),c=Object.entries(null===r||void 0===r?void 0:r.reduce((function(t,e){var n,a,r,c,i,o,s,l;return void 0===(null===t||void 0===t?void 0:t[null===e||void 0===e||null===(n=e.measurements)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.unit])?(t[null===e||void 0===e||null===(r=e.measurements)||void 0===r||null===(c=r[0])||void 0===c?void 0:c.unit]=e.measurements,t):(t[null===e||void 0===e||null===(i=e.measurements)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.unit]=[].concat(Object(F.a)(t[null===e||void 0===e||null===(s=e.measurements)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.unit]),Object(F.a)(e.measurements)),t)}),{})),i=r.map((function(t){return t.measurements})).flat(),o=G.j().domain(G.d(i,(function(t){return t.at}))).range([0,e.width-50*(c.length-1)]),s=G.i().domain([G.g(i,(function(t){return t.value-90})),G.f(i,(function(t){return t.value}))+50]).range([e.height,0]),u=G.l(t.current);u.selectAll("* :not(.mouse-line)").remove();var m=u.append("g").attr("transform","translate(".concat(e.margin.left,",").concat(e.margin.top,")")),d=G.a(o).ticks(5).tickSize(-e.height).tickFormat((function(t){var e=t.getTimezoneOffset();return(t=new Date(t.getTime()-60*e*1e3)).toISOString().split(/[A-Za-z]|[.]/)[1]})),f=m.append("g").attr("transform","translate(".concat(50*(c.length-1),", ").concat(e.height,")")).call(d);f.selectAll("line").attr("stroke","darkGray"),f.selectAll("text").attr("opacity",.8).attr("color","black").attr("font-size","0.75rem"),c.forEach((function(t,n){var a=G.b(s).ticks(10).tickSize(n===c.length-1?-e.width+50*(c.length-1):0).tickSizeOuter(0).tickFormat((function(t){return"".concat(t)})),r=m.append("g").call(a);r.selectAll("line").attr("stroke","darkGray").attr("transform","translate(".concat(50*n,",0)")),r.selectAll("text").attr("opacity",.8).attr("color","black").attr("font-size","0.75rem").attr("transform","translate(".concat(50*n,",0)")),r.select(".domain").attr("transform","translate(".concat(50*n,",0)")),r.append("text").attr("fill","black").attr("transform","rotate(-90) translate(0,".concat(50*n,")")).style("font-size","18").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(t[0])}));var v=G.e().x((function(t){return o(t.at)})).y((function(t){return s(t.value)}));m.selectAll(".line").data(r).enter().append("path").attr("fill","none").attr("transform","translate(".concat(50*(c.length-1),",0)")).attr("stroke",(function(t){return t.color})).attr("stroke-width",1).attr("d",(function(t){return v(t.measurements)}));var h=m.selectAll("g.focus").data(r).enter().append("g").attr("class","focus").style("display","none");h.append("circle").attr("fill","none").attr("stroke",(function(t){return t.color})).attr("r",4.5),h.append("text").attr("class","value").attr("x",9).attr("dy",".35em"),h.append("text").attr("class","metric").attr("transform","translate(-10,".concat(15,")")).text((function(t){return t.metric})).attr("x",9).attr("dy",".35em"),m.append("path").attr("class","mouse-line").style("stroke","gray").style("stroke-width","1px").attr("d",(function(){return"M"+$+","+e.height+" "+$+",0"}));var b=G.c((function(t){return t.at})).left,j=o.invert($-50*(c.length-1)),p=b(r[0].measurements,+j,1);m.append("text").attr("class","time").attr("transform","translate(".concat($-30,",").concat(e.height+20,")")).attr("x",9).attr("fill","gray").attr("dy",".35em").text((function(){var t,e,n,a;if(void 0===r[0].measurements[p])return"";var c=new Date(null===(t=r[0].measurements[p])||void 0===t?void 0:t.at),i=null===(e=c)||void 0===e?void 0:e.getTimezoneOffset();return null===(a=c=new Date((null===(n=c)||void 0===n?void 0:n.getTime())-60*i*1e3))||void 0===a?void 0:a.toISOString().split(/[A-Za-z]|[.]/)[1]})),r.forEach((function(t,e){var n=o.invert($-50*(c.length-1)),a=b(t.measurements,+n,1),r=t.measurements[a-1],i=t.measurements[a>t.measurements.length-1?t.measurements.length-1:a];if(void 0!==r&&void 0!==i){var l=+n-r.at>i.at-+n?i:r;h.filter((function(t,n){return n===e})).attr("transform","translate(".concat(o(l.at)+50*(c.length-1),",").concat(s(l.value),")")),h.filter((function(t,n){return n===e})).select("text.value").text(l.value)}})),m.append("rect").attr("class","overlay").attr("fill","none").attr("pointer-events","all").attr("width",e.width).attr("height",e.height).on("mouseover",(function(){h.style("display",null)})).on("mouseout",(function(){h.style("display","none")})).on("mousemove",(function(t){var n=G.h(t,this)[0];$=n;var a=o.invert(n-50*(c.length-1)),i=b(r[0].measurements,+a,1);m.select("path.mouse-line").style("stroke","gray").attr("d",(function(){return"M"+n+","+e.height+" "+n+",0"})),m.select("text.time").text((function(){var t=new Date(r[0].measurements[i].at),e=t.getTimezoneOffset();return(t=new Date(t.getTime()-60*e*1e3)).toISOString().split(/[A-Za-z]|[.]/)[1]})).attr("transform","translate(".concat(n-30,",").concat(e.height+20,")")),r.forEach((function(t,e){var n=t.measurements[i-1],r=t.measurements[i>t.measurements.length-1?t.measurements.length-1:i];if(void 0!==n&&void 0!==r){var l=+a-n.at>r.at-+a?r:n;h.filter((function(t,n){return n===e})).attr("transform","translate(".concat(o(l.at)+50*(c.length-1),",").concat(s(l.value),")")),h.filter((function(t,n){return n===e})).select("text.value").text(l.value)}}))}))}(a,h,r)}),[v,o]),Object(M.jsx)("section",{className:"chart-section",children:Object(M.jsx)("div",{className:"chart-container",ref:i,children:Object(M.jsx)("svg",{className:"chart",ref:a})})})},B=n(376),Q=n(375),V=Object(g.a)(J||(J=Object(p.a)(["\n  query {\n    getMetrics\n  }\n"]))),H=function(){var t=Object(O.a)(V),e=(t.loading,t.error,t.data),n=Object(r.useState)([]),a=Object(s.a)(n,2),c=a[0],i=a[1],o=Object(r.useContext)(X),u=(o.state,o.dispatch);Object(r.useEffect)((function(){u({type:"updateMetrics",payload:c})}),[c]),Object(r.useEffect)((function(){}),[null===e||void 0===e?void 0:e.getMetrics]);return Object(M.jsx)("div",{children:e&&Object(M.jsx)(Q.a,{multiple:!0,onChange:function(t,e){i(e)},value:c,getOptionLabel:function(t){return t},disablePortal:!0,id:"combo-box-demo",options:null===e||void 0===e?void 0:e.getMetrics,sx:{width:800},renderInput:function(t){return Object(M.jsx)(B.a,Object(l.a)(Object(l.a)({},t),{},{label:"Metrics"}))}})})},K=(n(294),Object(m.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}})),U=new D.a({uri:"https://react-assessment.herokuapp.com/graphql",cache:new I.a}),X=c.a.createContext({measurements:[],metircs:[]});function Y(t,e){switch(e.type){case"updateMetrics":return Object(l.a)(Object(l.a)({},t),{},{metrics:e.payload});case"updateMeasurements":return Object(l.a)(Object(l.a)({},t),{},{measurements:e.payload});default:throw Error("invalid action type!")}}var _=function(){var t=Object(r.useReducer)(Y,{metrics:[],measurements:[]}),e=Object(s.a)(t,2),n=e[0],a=e[1];return Object(M.jsx)(X.Provider,{value:{state:n,dispatch:a},children:Object(M.jsx)(T.a,{client:U,children:Object(M.jsxs)(d.a,{theme:K,children:[Object(M.jsx)(f.a,{}),Object(M.jsxs)(C,{children:[Object(M.jsx)(L,{}),Object(M.jsx)(H,{}),Object(M.jsx)(Z,{}),Object(M.jsx)(u.a,{})]})]})})})};o.a.render(Object(M.jsx)(_,{}),document.getElementById("root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.18e30188.chunk.js.map