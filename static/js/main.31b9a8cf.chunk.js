(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{285:function(t,e,n){},288:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(17),i=n.n(c),s=n(11),o=n(29),u=n(141),l=n(142),m=n(362),d=n(363),f=(n(280),n(358)),v=n(355),h=n(357),b=n(352),j=n(351),p=n(6),g=function(){var t=Object(j.a)();t.latitude,t.longitude;return null},O=function(){return Object(p.jsx)(g,{})},x=Object(b.a)({grow:{flexGrow:1}}),y=function(){var t=x();return Object(p.jsx)(v.a,{position:"static",children:Object(p.jsxs)(h.a,{children:[Object(p.jsxs)(f.a,{variant:"h6",color:"inherit",className:t.grow,children:["Jenny's"," EOG React Visualization Assessment"]}),Object(p.jsx)(O,{})]})})},w=Object(b.a)({wrapper:{height:"100vh"}}),k=function(t){var e=t.children,n=w();return Object(p.jsx)("div",{className:n.wrapper,children:e})},z=n(366),M=n(368),S=n(361),E=n(34),A=n(367),N=n(359);var R,D=n(20),I=n(24),T=0;var C,G=Object(A.a)(R||(R=Object(E.a)(["\n  query ($input: [MeasurementQuery]) {\n    getMultipleMeasurements(input: $input) {\n      metric\n      measurements {\n        at\n        value\n        metric\n        unit\n      }\n    }\n  }\n"]))),q=function(){var t=Object(r.useContext)(Q),e=Date.now()-18e5,n=Object(r.useRef)(t.state.metrics.map((function(t){return{metricName:t,after:e}}))),c=Object(r.useRef)(),i=Object(r.useRef)(),u=function(t){var e=Object(r.useState)({width:0,height:0}),n=Object(s.a)(e,2),a=n[0],c=n[1],i=Object(r.useRef)(new ResizeObserver((function(t){var e=t[0].borderBoxSize[0],n=e.inlineSize,r=e.blockSize;c({width:n,height:r})})));return Object(r.useEffect)((function(){return t.current&&i.current.observe(t.current),function(){t.current&&i.current.unobserve(t.current)}}),[t,i]),a}(i),l=Object(N.a)(G,{variables:{input:n.current},pollInterval:1e3,fetchPolicy:"no-cache"}),m=Object(s.a)(l,2),d=m[0],f=m[1],v=(f.loading,f.data);f.error;Object(r.useEffect)((function(){n.current=t.state.metrics.map((function(t){return{metricName:t,after:e}})),d()}),[t.state.metrics]);var h={margin:{top:30,right:50,bottom:30,left:50},width:u.width-100,height:u.height-60};return n.current.forEach((function(t){return t.after=e})),a.a.useEffect((function(){var t,e,n=null===v||void 0===v||null===(t=v.getMultipleMeasurements)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.measurements,r=null===v||void 0===v?void 0:v.getMultipleMeasurements;n&&function(t,e,n){var r=I.k,a=n.map((function(t,e){return Object(o.a)(Object(o.a)({},t),{},{color:r[e]})})),c=Object.entries(null===a||void 0===a?void 0:a.reduce((function(t,e){var n,r,a,c,i,s,o,u;return void 0===(null===t||void 0===t?void 0:t[null===e||void 0===e||null===(n=e.measurements)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.unit])?(t[null===e||void 0===e||null===(a=e.measurements)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.unit]=e.measurements,t):(t[null===e||void 0===e||null===(i=e.measurements)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.unit]=[].concat(Object(D.a)(t[null===e||void 0===e||null===(o=e.measurements)||void 0===o||null===(u=o[0])||void 0===u?void 0:u.unit]),Object(D.a)(e.measurements)),t)}),{})),i=a.map((function(t){return t.measurements})).flat(),s=I.j().domain(I.d(i,(function(t){return t.at}))).range([0,e.width-50*(c.length-1)]),u=I.i().domain([I.g(i,(function(t){return t.value-90})),I.f(i,(function(t){return t.value}))+50]).range([e.height,0]),l=I.l(t.current);l.selectAll("* :not(.mouse-line)").remove();var m=l.append("g").attr("transform","translate(".concat(e.margin.left,",").concat(e.margin.top,")")),d=I.a(s).ticks(5).tickSize(-e.height).tickFormat((function(t){var e=t.getTimezoneOffset();return(t=new Date(t.getTime()-60*e*1e3)).toISOString().split(/[A-Za-z]|[.]/)[1]})),f=m.append("g").attr("transform","translate(".concat(50*(c.length-1),", ").concat(e.height,")")).call(d);f.selectAll("line").attr("stroke","darkGray"),f.selectAll("text").attr("opacity",.8).attr("color","black").attr("font-size","0.75rem"),c.forEach((function(t,n){var r=I.b(u).ticks(10).tickSize(n===c.length-1?-e.width+50*(c.length-1):0).tickSizeOuter(0).tickFormat((function(t){return"".concat(t)})),a=m.append("g").call(r);a.selectAll("line").attr("stroke","darkGray").attr("transform","translate(".concat(50*n,",0)")),a.selectAll("text").attr("opacity",.8).attr("color","black").attr("font-size","0.75rem").attr("transform","translate(".concat(50*n,",0)")),a.select(".domain").attr("transform","translate(".concat(50*n,",0)")),a.append("text").attr("fill","black").attr("transform","rotate(-90) translate(0,".concat(50*n,")")).style("font-size","18").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(t[0])}));var v=I.e().x((function(t){return s(t.at)})).y((function(t){return u(t.value)}));m.selectAll(".line").data(a).enter().append("path").attr("fill","none").attr("transform","translate(".concat(50*(c.length-1),",0)")).attr("stroke",(function(t){return t.color})).attr("stroke-width",1).attr("d",(function(t){return v(t.measurements)}));var h=m.selectAll("g.focus").data(a).enter().append("g").attr("class","focus").style("display","none");h.append("circle").attr("fill","none").attr("stroke",(function(t){return t.color})).attr("r",4.5),h.append("text").attr("class","value").attr("x",9).attr("dy",".35em"),h.append("text").attr("class","metric").attr("transform","translate(-10,".concat(15,")")).text((function(t){return t.metric})).attr("x",9).attr("dy",".35em"),m.append("path").attr("class","mouse-line").style("stroke","gray").style("stroke-width","1px").attr("d",(function(){return"M"+T+","+e.height+" "+T+",0"}));var b=I.c((function(t){return t.at})).left,j=s.invert(T-50*(c.length-1)),p=b(a[0].measurements,+j,1);m.append("text").attr("class","time").attr("transform","translate(".concat(T-30,",").concat(e.height+20,")")).attr("x",9).attr("fill","gray").attr("dy",".35em").text((function(){var t,e,n,r;if(void 0===a[0].measurements[p])return"";var c=new Date(null===(t=a[0].measurements[p])||void 0===t?void 0:t.at),i=null===(e=c)||void 0===e?void 0:e.getTimezoneOffset();return null===(r=c=new Date((null===(n=c)||void 0===n?void 0:n.getTime())-60*i*1e3))||void 0===r?void 0:r.toISOString().split(/[A-Za-z]|[.]/)[1]})),a.forEach((function(t,e){var n=s.invert(T-50*(c.length-1)),r=b(t.measurements,+n,1),a=t.measurements[r-1],i=t.measurements[r>t.measurements.length-1?t.measurements.length-1:r];if(void 0!==a&&void 0!==i){var o=+n-a.at>i.at-+n?i:a;h.filter((function(t,n){return n===e})).attr("transform","translate(".concat(s(o.at)+50*(c.length-1),",").concat(u(o.value),")")),h.filter((function(t,n){return n===e})).select("text.value").text(o.value)}})),m.append("rect").attr("class","overlay").attr("fill","none").attr("pointer-events","all").attr("width",e.width).attr("height",e.height).on("mouseover",(function(){h.style("display",null)})).on("mouseout",(function(){h.style("display","none")})).on("mousemove",(function(t){var n=I.h(t,this)[0];T=n;var r=s.invert(n-50*(c.length-1)),i=b(a[0].measurements,+r,1);m.select("path.mouse-line").style("stroke","gray").attr("d",(function(){return"M"+n+","+e.height+" "+n+",0"})),m.select("text.time").text((function(){var t=new Date(a[0].measurements[i].at),e=t.getTimezoneOffset();return(t=new Date(t.getTime()-60*e*1e3)).toISOString().split(/[A-Za-z]|[.]/)[1]})).attr("transform","translate(".concat(n-30,",").concat(e.height+20,")")),a.forEach((function(t,e){var n=t.measurements[i-1],a=t.measurements[i>t.measurements.length-1?t.measurements.length-1:i];if(void 0!==n&&void 0!==a){var o=+r-n.at>a.at-+r?a:n;h.filter((function(t,n){return n===e})).attr("transform","translate(".concat(s(o.at)+50*(c.length-1),",").concat(u(o.value),")")),h.filter((function(t,n){return n===e})).select("text.value").text(o.value)}}))}))}(c,h,r)}),[v,u]),Object(p.jsx)("section",{className:"chart-section",children:Object(p.jsx)("div",{className:"chart-container",ref:i,children:Object(p.jsx)("svg",{className:"chart",ref:c})})})},J=n(143),P=n(365),Z=n(364),B=Object(A.a)(C||(C=Object(E.a)(["\n  query {\n    getMetrics\n  }\n"]))),F=function(){var t=Object(J.a)(B),e=(t.loading,t.error,t.data),n=Object(r.useState)([]),a=Object(s.a)(n,2),c=a[0],i=a[1],u=Object(r.useContext)(Q),l=(u.state,u.dispatch);Object(r.useEffect)((function(){l({type:"updateMetrics",payload:c})}),[c]),Object(r.useEffect)((function(){}),[null===e||void 0===e?void 0:e.getMetrics]);return Object(p.jsx)("div",{children:e&&Object(p.jsx)(Z.a,{multiple:!0,onChange:function(t,e){i(e)},value:c,getOptionLabel:function(t){return t},disablePortal:!0,id:"combo-box-demo",options:null===e||void 0===e?void 0:e.getMetrics,sx:{width:800},renderInput:function(t){return Object(p.jsx)(P.a,Object(o.a)(Object(o.a)({},t),{},{label:"Metrics"}))}})})},$=(n(285),Object(l.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}})),L=new z.a({uri:"https://react-assessment.herokuapp.com/graphql",cache:new M.a}),Q=a.a.createContext({measurements:[],metircs:[]});function V(t,e){switch(e.type){case"updateMetrics":return Object(o.a)(Object(o.a)({},t),{},{metrics:e.payload});case"updateMeasurements":return Object(o.a)(Object(o.a)({},t),{},{measurements:e.payload});default:throw Error("invalid action type!")}}var H=function(){var t=Object(r.useReducer)(V,{metrics:[],measurements:[]}),e=Object(s.a)(t,2),n=e[0],a=e[1];return Object(p.jsx)(Q.Provider,{value:{state:n,dispatch:a},children:Object(p.jsx)(S.a,{client:L,children:Object(p.jsxs)(m.a,{theme:$,children:[Object(p.jsx)(d.a,{}),Object(p.jsxs)(k,{children:[Object(p.jsx)(y,{}),Object(p.jsx)(F,{}),Object(p.jsx)(q,{}),Object(p.jsx)(u.a,{})]})]})})})};i.a.render(Object(p.jsx)(H,{}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.31b9a8cf.chunk.js.map