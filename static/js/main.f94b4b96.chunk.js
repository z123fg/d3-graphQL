(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{285:function(t,e,n){},288:function(t,e,n){"use strict";n.r(e);var a,r=n(0),c=n.n(r),i=n(17),o=n.n(i),s=n(11),u=n(30),l=n(141),m=n(142),d=n(362),f=n(363),v=(n(280),n(358)),h=n(355),p=n(357),b=n(352),j=n(28),g=n(367),O=n(351),x=n(6),y=(Object(g.a)(a||(a=Object(j.a)(["\n  query ($latLong: WeatherQuery!) {\n    getWeatherForLocation(latLong: $latLong) {\n      description\n      locationName\n      temperatureinCelsius\n    }\n  }\n"]))),function(){var t=Object(O.a)();t.latitude,t.longitude;return null}),w=function(){return Object(x.jsx)(y,{})},k=Object(b.a)({grow:{flexGrow:1}}),z=function(){var t=k();return Object(x.jsx)(h.a,{position:"static",children:Object(x.jsxs)(p.a,{children:[Object(x.jsxs)(v.a,{variant:"h6",color:"inherit",className:t.grow,children:["Jenny's"," EOG React Visualization Assessment"]}),Object(x.jsx)(w,{})]})})},M=Object(b.a)({wrapper:{height:"100vh"}}),S=function(t){var e=t.children,n=M();return Object(x.jsx)("div",{className:n.wrapper,children:e})},E=n(366),A=n(368),N=n(361),R=n(359);var C,D=n(20),I=n(24),T=0;var L,q=Object(g.a)(C||(C=Object(j.a)(["\n  query ($input: [MeasurementQuery]) {\n    getMultipleMeasurements(input: $input) {\n      metric\n      measurements {\n        at\n        value\n        metric\n        unit\n      }\n    }\n  }\n"]))),G=function(){var t=Object(r.useContext)(W),e=Date.now()-18e5,n=Object(r.useRef)(t.state.metrics.map((function(t){return{metricName:t,after:e}}))),a=Object(r.useRef)(),i=Object(r.useRef)(),o=function(t){var e=Object(r.useState)({width:0,height:0}),n=Object(s.a)(e,2),a=n[0],c=n[1],i=Object(r.useRef)(new ResizeObserver((function(t){var e=t[0].borderBoxSize[0],n=e.inlineSize,a=e.blockSize;c({width:n,height:a})})));return Object(r.useEffect)((function(){return t.current&&i.current.observe(t.current),function(){t.current&&i.current.unobserve(t.current)}}),[t,i]),a}(i),l=Object(R.a)(q,{variables:{input:n.current},onCompleted:function(e){t.dispatch({type:"updateMeasurements",payload:e})},pollInterval:1e3,fetchPolicy:"no-cache"}),m=Object(s.a)(l,2),d=m[0],f=m[1],v=(f.loading,f.data);f.error;Object(r.useEffect)((function(){n.current=t.state.metrics.map((function(t){return{metricName:t,after:e}})),d()}),[t.state.metrics]);var h={margin:{top:30,right:50,bottom:30,left:50},width:o.width-100,height:o.height-60};return n.current.forEach((function(t){return t.after=e})),c.a.useEffect((function(){var t,e,n=null===v||void 0===v||null===(t=v.getMultipleMeasurements)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.measurements,r=null===v||void 0===v?void 0:v.getMultipleMeasurements;n&&function(t,e,n){var a=I.k,r=n.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{color:a[e]})})),c=Object.entries(null===r||void 0===r?void 0:r.reduce((function(t,e){var n,a,r,c,i,o,s,u;return void 0===(null===t||void 0===t?void 0:t[null===e||void 0===e||null===(n=e.measurements)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.unit])?(t[null===e||void 0===e||null===(r=e.measurements)||void 0===r||null===(c=r[0])||void 0===c?void 0:c.unit]=e.measurements,t):(t[null===e||void 0===e||null===(i=e.measurements)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.unit]=[].concat(Object(D.a)(t[null===e||void 0===e||null===(s=e.measurements)||void 0===s||null===(u=s[0])||void 0===u?void 0:u.unit]),Object(D.a)(e.measurements)),t)}),{})),i=r.map((function(t){return t.measurements})).flat(),o=I.j().domain(I.d(i,(function(t){return t.at}))).range([0,e.width-50*(c.length-1)]),s=I.i().domain([I.g(i,(function(t){return t.value-90})),I.f(i,(function(t){return t.value}))+50]).range([e.height,0]),l=I.l(t.current);l.selectAll("* :not(.mouse-line)").remove();var m=l.append("g").attr("transform","translate(".concat(e.margin.left,",").concat(e.margin.top,")")),d=I.a(o).ticks(5).tickSize(-e.height).tickFormat((function(t){var e=t.getTimezoneOffset();return(t=new Date(t.getTime()-60*e*1e3)).toISOString().split(/[A-Za-z]|[.]/)[1]})),f=m.append("g").attr("transform","translate(".concat(50*(c.length-1),", ").concat(e.height,")")).call(d);f.selectAll("line").attr("stroke","darkGray"),f.selectAll("text").attr("opacity",.8).attr("color","black").attr("font-size","0.75rem"),c.forEach((function(t,n){var a=I.b(s).ticks(10).tickSize(n===c.length-1?-e.width+50*(c.length-1):0).tickSizeOuter(0).tickFormat((function(t){return"".concat(t)})),r=m.append("g").call(a);r.selectAll("line").attr("stroke","darkGray").attr("transform","translate(".concat(50*n,",0)")),r.selectAll("text").attr("opacity",.8).attr("color","black").attr("font-size","0.75rem").attr("transform","translate(".concat(50*n,",0)")),r.select(".domain").attr("transform","translate(".concat(50*n,",0)")),r.append("text").attr("fill","black").attr("transform","rotate(-90) translate(0,".concat(50*n,")")).style("font-size","18").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(t[0])}));var v=I.e().x((function(t){return o(t.at)})).y((function(t){return s(t.value)}));m.selectAll(".line").data(r).enter().append("path").attr("fill","none").attr("transform","translate(".concat(50*(c.length-1),",0)")).attr("stroke",(function(t){return t.color})).attr("stroke-width",1).attr("d",(function(t){return v(t.measurements)}));var h=m.selectAll("g.focus").data(r).enter().append("g").attr("class","focus").style("display","none");h.append("circle").attr("fill","none").attr("stroke",(function(t){return t.color})).attr("r",4.5),h.append("text").attr("class","value").attr("x",9).attr("dy",".35em"),h.append("text").attr("class","metric").attr("transform","translate(-10,".concat(15,")")).text((function(t){return t.metric})).attr("x",9).attr("dy",".35em"),m.append("path").attr("class","mouse-line").style("stroke","gray").style("stroke-width","1px").attr("d",(function(){return"M"+T+","+e.height+" "+T+",0"}));var p=I.c((function(t){return t.at})).left,b=o.invert(T-50*(c.length-1)),j=p(r[0].measurements,+b,1);m.append("text").attr("class","time").attr("transform","translate(".concat(T-30,",").concat(e.height+20,")")).attr("x",9).attr("fill","gray").attr("dy",".35em").text((function(){var t,e,n,a;if(void 0===r[0].measurements[j])return"";var c=new Date(null===(t=r[0].measurements[j])||void 0===t?void 0:t.at),i=null===(e=c)||void 0===e?void 0:e.getTimezoneOffset();return null===(a=c=new Date((null===(n=c)||void 0===n?void 0:n.getTime())-60*i*1e3))||void 0===a?void 0:a.toISOString().split(/[A-Za-z]|[.]/)[1]})),r.forEach((function(t,e){var n=o.invert(T-50*(c.length-1)),a=p(t.measurements,+n,1),r=t.measurements[a-1],i=t.measurements[a>t.measurements.length-1?t.measurements.length-1:a];if(void 0!==r&&void 0!==i){var u=+n-r.at>i.at-+n?i:r;h.filter((function(t,n){return n===e})).attr("transform","translate(".concat(o(u.at)+50*(c.length-1),",").concat(s(u.value),")")),h.filter((function(t,n){return n===e})).select("text.value").text(u.value)}})),m.append("rect").attr("class","overlay").attr("fill","none").attr("pointer-events","all").attr("width",e.width).attr("height",e.height).on("mouseover",(function(){h.style("display",null)})).on("mouseout",(function(){h.style("display","none")})).on("mousemove",(function(t){var n=I.h(t,this)[0];T=n;var a=o.invert(n-50*(c.length-1)),i=p(r[0].measurements,+a,1);m.select("path.mouse-line").style("stroke","gray").attr("d",(function(){return"M"+n+","+e.height+" "+n+",0"})),m.select("text.time").text((function(){var t=new Date(r[0].measurements[i].at),e=t.getTimezoneOffset();return(t=new Date(t.getTime()-60*e*1e3)).toISOString().split(/[A-Za-z]|[.]/)[1]})).attr("transform","translate(".concat(n-30,",").concat(e.height+20,")")),r.forEach((function(t,e){var n=t.measurements[i-1],r=t.measurements[i>t.measurements.length-1?t.measurements.length-1:i];if(void 0!==n&&void 0!==r){var u=+a-n.at>r.at-+a?r:n;h.filter((function(t,n){return n===e})).attr("transform","translate(".concat(o(u.at)+50*(c.length-1),",").concat(s(u.value),")")),h.filter((function(t,n){return n===e})).select("text.value").text(u.value)}}))}))}(a,h,r)}),[v,o]),Object(x.jsx)("section",{className:"chart-section",children:Object(x.jsx)("div",{className:"chart-container",ref:i,children:Object(x.jsx)("svg",{className:"chart",ref:a})})})},$=n(143),F=n(365),J=n(364),P=Object(g.a)(L||(L=Object(j.a)(["\n  query {\n    getMetrics\n  }\n"]))),Z=function(){var t=Object($.a)(P),e=(t.loading,t.error,t.data),n=Object(r.useState)([]),a=Object(s.a)(n,2),c=a[0],i=a[1],o=Object(r.useContext)(W),l=(o.state,o.dispatch);Object(r.useEffect)((function(){l({type:"updateMetrics",payload:c})}),[c]),Object(r.useEffect)((function(){}),[null===e||void 0===e?void 0:e.getMetrics]);return Object(x.jsx)("div",{children:e&&Object(x.jsx)(J.a,{multiple:!0,onChange:function(t,e){i(e)},value:c,getOptionLabel:function(t){return t},disablePortal:!0,id:"combo-box-demo",options:null===e||void 0===e?void 0:e.getMetrics,sx:{width:800},renderInput:function(t){return Object(x.jsx)(F.a,Object(u.a)(Object(u.a)({},t),{},{label:"Metrics"}))}})})},B=(n(285),Object(m.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}})),Q=new E.a({uri:"https://react-assessment.herokuapp.com/graphql",cache:new A.a}),W=c.a.createContext({measurements:[],metircs:[]});function V(t,e){switch(e.type){case"updateMetrics":return Object(u.a)(Object(u.a)({},t),{},{metrics:e.payload});case"updateMeasurements":return Object(u.a)(Object(u.a)({},t),{},{measurements:e.payload});default:throw Error("invalid action type!")}}var H=function(){var t=Object(r.useReducer)(V,{metrics:[],measurements:[]}),e=Object(s.a)(t,2),n=e[0],a=e[1];return Object(x.jsx)(W.Provider,{value:{state:n,dispatch:a},children:Object(x.jsx)(N.a,{client:Q,children:Object(x.jsxs)(d.a,{theme:B,children:[Object(x.jsx)(f.a,{}),Object(x.jsxs)(S,{children:[Object(x.jsx)(z,{}),Object(x.jsx)(Z,{}),Object(x.jsx)(G,{}),Object(x.jsx)(l.a,{})]})]})})})};o.a.render(Object(x.jsx)(H,{}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.f94b4b96.chunk.js.map